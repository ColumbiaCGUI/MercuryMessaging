using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class TrafficLightControl : MonoBehaviour {
//-----------------------------------------------------------------------------------------------------------------------------------------
//-----------------------------------------------------------------------------------------------------------------------------------------
//-----------------------------------------------------------------------------------------------------------------------------------------

    public bool direction1 = true;

    Renderer objRenderer;           
    public int mode;
    float delay;

//-----------------------------------------------------------------------------------------------------------------------------------------
//-----------------------------------------------------------------------------------------------------------------------------------------
//-----------------------------------------------------------------------------------------------------------------------------------------
private void Start()
{
    objRenderer = GetComponent<Renderer>();
        
    mode = 0;
    objRenderer.materials[1].SetTextureOffset("_MainTex", new Vector2(0.0f, 0.0f));
    if(direction1)
    {
        mode = 2;
        objRenderer.materials[1].SetTextureOffset("_MainTex", new Vector2(0.0625f * 2.0f, 0.0f));
    }
    delay = 2.0f;
}
//-----------------------------------------------------------------------------------------------------------------------------------------
//-----------------------------------------------------------------------------------------------------------------------------------------
//-----------------------------------------------------------------------------------------------------------------------------------------
void Update()
{
    // red
    if(mode == 0)
    {    
        delay -= Time.deltaTime;
        if(delay < 0.0f)
        {
            delay = 1.0f;
            objRenderer.materials[1].SetTextureOffset("_MainTex", new Vector2(0.0625f * 1.0f, 0.0f));                
            mode = 1;
        }
    }
    // red-yellow
    else if(mode == 1)
    {    
        delay -= Time.deltaTime;
        if(delay < 0.0f)
        {
            delay = 5.0f;
            objRenderer.materials[1].SetTextureOffset("_MainTex", new Vector2(0.0625f * 2.0f, 0.0f));                
            mode = 2;
        }
    }
    // green 
    else if(mode == 2)
    {    
        delay -= Time.deltaTime;
        if(delay < 0.0f)
        {
            delay = 1.0f;
            objRenderer.materials[1].SetTextureOffset("_MainTex", new Vector2(0.0625f * 3.0f, 0.0f));                
            mode = 3;
        }
    }
    // green-yellow
    else if(mode == 3)
    {    
        delay -= Time.deltaTime;
        if(delay < 0.0f)
        {
            delay = 5.0f;
            objRenderer.materials[1].SetTextureOffset("_MainTex", new Vector2(0.0625f * 0.0f, 0.0f));                
            mode = 0;
        }
    }
            
}
//-----------------------------------------------------------------------------------------------------------------------------------------
//-----------------------------------------------------------------------------------------------------------------------------------------
//-----------------------------------------------------------------------------------------------------------------------------------------
}
